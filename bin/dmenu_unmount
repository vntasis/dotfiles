#!/bin/sh

drives=$(lsblk -lp | awk '/t +\// && !/boot/  && !/\/$/ && !/home$/ {print $1, "(" $4 ")", "on", $7}')
[ -z "$drives" ] && exit

chosen=$(echo "$drives" | dmenu -fn 'Mononoki:14' -i -l 10 -p "Select drive to unmount:" | awk '{print $1}')
[ -z "$chosen" ] && exit

#udisksctl unmount -b $chosen

#udisksctl power-off -b $(echo $chosen | sed 's/[1-9]//g')

sudo umount $chosen && notify-send -u low "$chosen unmounted"
